<script>
  import { page } from "$app/stores";

  import { token } from "$lib/auth";
  import LinkButton from "$lib/components/link-button.svelte";
  import Label from "$lib/components/label.svelte";
  import {
    checkBoxBlankIcon,
    compassDiscoverIcon,
    mapPinIcon,
  } from "$lib/icons";

  export let service;
  export let isPreview = false;

  const editLink = `${$page.path}/edit`;
</script>

<style>
  .tags {
    display: flex;
    flex-direction: row;
    gap: var(--s16);
  }

  @media print {
    h1 {
      color: var(--col-france-blue);
    }
  }
</style>

<div class="col-start-1 col-span-full  mb-6  text-white">
  <div class="mx-auto">
    <Label label={service.structureInfo.name} darkBg />
    <h1 class="text-white">{service.name}</h1>
    {#if $token && service.canWrite && !isPreview}
      <div class="my-2 noprint">
        <LinkButton to={editLink} label="Ã‰diter" small />
      </div>
    {/if}
    <div class="tags">
      {#if service.isAvailable}
        <Label
          label="Disponible"
          iconOnLeft
          icon={checkBoxBlankIcon}
          success
          darkBg
          bold />
      {:else}
        <Label
          label="Indisponible"
          iconOnLeft
          icon={checkBoxBlankIcon}
          darkBg />
      {/if}

      <Label
        label={service.kindsDisplay.join(", ")}
        iconOnLeft
        icon={compassDiscoverIcon}
        darkBg />

      <Label
        label={`${service.postalCode}, ${service.city}`}
        iconOnLeft
        icon={mapPinIcon}
        darkBg />
    </div>
  </div>
</div>
