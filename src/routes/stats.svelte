<script>
  import CG from "$lib/components/layout/centered-grid.svelte";
  import { METABASE_EMBED_URL, PLAUSIBLE_EMBED_URL } from "$lib/env.js";
  function hR(id) {
    iFrameResize({}, id);
  }
</script>

<svelte:head>
  <title>Statistiques | DORA</title>
  <script
    src="https://metabase.dora.fabrique.social.gouv.fr/app/iframeResizer.js">
  </script>
  <script src="https://plausible.io/js/embed.host.js"></script>
</svelte:head>

<CG>
  <div class="col-span-full text-center">
    <h1 class="text-france-blue">Statistiques</h1>
  </div>
</CG>

<CG>
  <h2 class="col-span-full">Statistiques d’usage</h2>

  <iframe
    class="col-span-full"
    title="Dashboard Plausible"
    src={PLAUSIBLE_EMBED_URL}
    frameborder="0"
    allowtransparency
    on:load={hR("#plausibleIframe")}
    id="plausibleIframe"
  />

  <h2 class="col-span-full">Statistiques de référencement</h2>

  <iframe
    class="col-span-full"
    title="Dashboard Metabase"
    src={METABASE_EMBED_URL}
    frameborder="0"
    allowtransparency
    on:load={hR("#metabaseIframe")}
    id="metabaseIframe"
  />
</CG>

<style lang="postcss">
  iframe {
    width: 100%;
  }

  h2 {
    @apply mb-s0 mt-s20 text-f28;
  }
</style>
